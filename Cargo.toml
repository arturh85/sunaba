[package]
name = "sunaba"
version = "0.1.0"
edition = "2021"
authors = ["Your Name <you@example.com>"]
description = "A 2D falling-sand physics sandbox survival game"
license = "MIT"
repository = "https://github.com/yourusername/sunaba"

[lib]
crate-type = ["cdylib", "rlib"]

[dependencies]
# Graphics
wgpu = "0.20"
winit = "0.29"
bytemuck = { version = "1.14", features = ["derive"] }

# UI
egui = "0.28"
egui-wgpu = "0.28"
egui-winit = "0.28"

# Physics (rigid bodies)
rapier2d = "0.18"

# Math
glam = { version = "0.25", features = ["serde"] }

# Serialization
serde = { version = "1.0", features = ["derive"] }
bincode = "1.3"
ron = "0.8"
serde-big-array = "0.5"

# Compression for chunk storage
lz4_flex = "0.11"

# Parallelism
rayon = "1.8"

# Random number generation
rand = "0.8"
rand_xoshiro = "0.6"  # Fast, seedable RNG

# Logging
log = "0.4"

# Error handling
thiserror = "1.0"
anyhow = "1.0"

# Utilities
bitflags = "2.4"
pollster = "0.3"  # Simple async executor for wgpu init

# Platform-specific dependencies
[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
env_logger = "0.11"
clap = { version = "4.4", features = ["derive"] }

# Noise generation for procedural terrain
noise = "0.9"

# Timestamps for world metadata
chrono = "0.4"

# WASM support
wasm-bindgen = "0.2"
wasm-bindgen-futures = "0.4"
web-sys = { version = "0.3", features = ["Window", "Document", "HtmlCanvasElement"] }
console_error_panic_hook = "0.1"
console_log = "1.0"

[dev-dependencies]
criterion = "0.5"  # Benchmarking

[profile.dev]
opt-level = 1  # Some optimization even in debug for playable simulation

[profile.dev.package."*"]
opt-level = 3  # Full optimization for dependencies

[profile.release]
lto = "thin"
codegen-units = 1

# WASM-specific optimizations
[profile.release.package."*"]
opt-level = 3

# [[bench]]
# name = "simulation"
# harness = false
